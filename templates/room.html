<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/global.css" />
        <link rel="stylesheet" href="/static/css/room.css" />
        <title>webmcast // {{.ID}}</title>
    </head>
    <body class="{{if not .Meta.HasVideo}}aside-chat{{end}}" data-stream-id="{{.ID}}">
        <main data-scrollbar>
            <template id="edit-name-template">
                <form method="POST" action="/user/set-stream-name">
                    <input type="text" name="value" />
                    <button type="submit">Save</button>
                </form>
            </template>
            <template id="edit-panel-template">
                <form method="POST" action="/user/set-stream-panel">
                    <input type="hidden" name="id" value="" />
                    <textarea name="value" rows="6" cols="10"></textarea>
                    <p class="error"></p>
                    <button type="reset">Cancel</button>
                    <button type="reset" class="remove">Remove</button>
                    <button type="submit">Save</button>
                </form>
            </template>
            <template id="chat-message-template">
                <li class="message">
                    <span class="name"></span>
                    <span class="text"></span>
                </li>
            </template>
            <div class="bg">
                {{ template "nav.html" . }}
                <section class="player-block bg">
                    <div class="player{{- if .Meta.HasVideo}} has-video{{end -}}
                                      {{- if .Meta.HasAudio}} has-audio{{end -}}" data-status="stopped">
                        {{- /* `video` with `height: auto` will always use the default aspect ratio.
                            so instead we enforce the size of this element with an empty image. */}}
                        <svg width="{{or .Meta.Width 853}}" height="{{or .Meta.Height 480}}"></svg>
                        <video crossorigin="anonymous"></video><div class="controls">
                            <a href="#" class="button icon play" title="Play">&#xf04b;</a>
                            <a href=""  class="button icon reload" title="Reload">&#xf021;</a>
                            <a href="#" class="button icon stop" title="Stop">&#xf04c;</a>
                            <a href="#" class="button icon mute" title="Mute">&#xf028;</a>
                            <a href="#" class="button icon unmute" title="Unmute">&#xf026;</a>
                            <div tabindex="0" class="volume" title="Volume"><div class="slider"></div></div>
                            <div class="status">not connected</div>
                            <a href="#" class="button icon theatre" title="Theatre mode">&#xf065;</a>
                            <a href="#" class="button icon collapse" title="Normal view">&#xf066;</a>
                            <a href="#" class="button icon fullscreen" title="Fullscreen">&#xf0b2;</a>
                        </div>
                    </div>
                    <div class="chat-tab"></div>
                    <aside class="chat">
                        <h1>#{{.ID}}</h1>
                        <ul class="log" data-scrollbar></ul>
                        <div class="offline-message">The chat is offline.</div>
                        <form class="login-form">
                            <textarea tabindex="1" class="input" cols="1" rows="1" placeholder="What's your name?" data-submit></textarea>
                            <p class="error"></p>
                            <a href="#" class="button icon join" title="Join" data-submit>&#xf090;</a>
                        </form>
                        <form class="input-form">
                            <textarea tabindex="1" class="input" cols="1" rows="1" data-submit></textarea>
                            <p class="error"></p>
                            <a href="#" class="button icon ins-emoji" title="Emoji...">&#xf118;</a>
                            <a href="#" class="button icon send" title="Send" data-submit>&#xf1d8;</a>
                        </form>
                    </aside>
                </section>
            </div>
            <section class="stream-header user-header">
                <img width="60" height="60" src="{{.Meta.Avatar 60}}" alt="{{.ID}}" />
                <div>
                    {{ if .Owned }}<a href="#" class="button icon edit" title="Edit name...">&#xf040;</a>{{ end }}
                    <h1 class="name">{{or .Meta.Name (printf "#%s" .ID)}}</h1>
                    <span>by {{or .Meta.UserName "anonymous"}}</span>
                </div>
                <span><span class="icon" title="Viewers">&#xf06e;</span> <span class="viewers">0</span></span>
                <span><span class="icon" title="Subscribers">&#xf004;</span> --</span>
            </section>
            <section class="stream-meta" data-tabs>
            {{- if or .Meta.Panels .Owned }}
                <x-columns class="stream-about" data-tab="Stream description">
                    <div>
                    {{- range $id, $_ := .Meta.Panels }}
                        <div class="panel" data-order="{{$id}}">
                        {{- if $.Owned }}
                            <a href="#" class="button edit icon" title="Edit panel..." data-panel="{{$id}}">&#xf040;</a>
                        {{- end }}
                            <p data-markup>{{.Text}}</p>
                        </div>
                    {{- end }}
                    {{- if .Owned }}
                        <div class="panel new-panel" data-order="{{len .Meta.Panels}}">
                            <a href="#" class="button icon edit" title="New panel...">&#xf040;</a>
                            <p data-markup>*Edit this to create a new panel*</p>
                        </div>
                    {{- end }}
                    </div>
                    <div></div>
                </x-columns>
            {{- end }}
            {{- if .Meta.UserAbout }}
                <div class="panel" data-tab="About {{.Meta.UserName}}">
                    <p data-markup>{{.Meta.UserAbout}}</p>
                </div>
            {{- end }}
            </section>
            {{ template "footer.html" }}
            <script src="/static/js/vendored.min.js"></script>
            <script src="/static/js/global.js"></script>
            <script src="/static/js/room.js"></script>
        </main>
    </body>
</html>
